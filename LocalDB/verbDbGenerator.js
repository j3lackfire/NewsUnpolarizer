/**
 * Created by Le Pham Minh Duc on 28-Apr-19.
 */

const utils = require('./../utils')
const verbProcessor = require('./../NLPHandler/verbHandler/verbProcessor')
const verbDbController = require('./verbDbController')

//List of all verbs in all of our db
let verbList = [ 'define',
    'come',
    'remain',
    'differ',
    'associate',
    'express',
    'believe',
    'hold',
    'favor',
    'take',
    'reduce',
    'churchgo',
    'tend',
    'do',
    'resemble',
    'increase',
    'rise',
    'grow',
    'forecast',
    'expect',
    'project',
    'surpass',
    'show',
    'make',
    'account',
    'have',
    'accelerate',
    'peak',
    'reach',
    'publish',
    'see',
    'live',
    'call',
    'know',
    'feel',
    'assimilate',
    'color',
    'maintain',
    'compel',
    'rule',
    'continue',
    'drive',
    'receive',
    'allow',
    'leave',
    'vary',
    'conduct',
    'prevail',
    'turn',
    'lead',
    'export',
    'commit',
    'include',
    'integrate',
    'adapt',
    'break',
    'contend',
    'face',
    'admit',
    'send',
    'contain',
    'report',
    'reveal',
    'work',
    'walk',
    'voice',
    'wear',
    'spread',
    'select',
    'sympathise',
    'maltreat',
    'persecute',
    'produce',
    'hear',
    'pursue',
    'inspire',
    'say',
    'give',
    'cause',
    'improve',
    'accord',
    'change',
    'close',
    'carry',
    'uncover',
    'go',
    'affect',
    'imprison',
    'force',
    'betray',
    'limit',
    'descend',
    'attempt',
    'charge',
    'kill',
    'deliver',
    'fight',
    'enact',
    'slip',
    'rebuild',
    'align',
    'wake',
    'accept',
    'combine',
    'arrive',
    'result',
    'narrow',
    'contribute',
    'learn',
    'look',
    'cite',
    'flee',
    'join',
    'fail',
    'document',
    'trace',
    'earn',
    'study',
    'exhibit',
    'create',
    'interact',
    'find',
    'view',
    'encourage',
    'exacerbate',
    'broaden',
    'extend',
    'begin',
    'expand',
    'divide',
    'compare',
    'survey',
    'indicate',
    'unite',
    'bring',
    'emigrate',
    'establish',
    'govern',
    'serve',
    'debate',
    'argue',
    'become',
    'elect',
    'advance',
    'presage',
    'appear',
    'underscore',
    'capture',
    'follow',
    'portray',
    'perform',
    'direct',
    'assist',
    'adopt',
    'recognise',
    'tackle',
    'combate',
    'appoint',
    'combat',
    'keep',
    'shed',
    'regard',
    'prevent',
    'consider',
    'need',
    'counter',
    'organise',
    'present',
    'participate',
    'pay',
    'prepare',
    'start',
    'require',
    'shake',
    'refuse',
    'exclude',
    'agree',
    'pass',
    'remove',
    'deny',
    'describe',
    'emphasize',
    'provoke',
    'embrace',
    'oppose',
    'prove',
    'put',
    'sell',
    'arrest',
    'conquer',
    'burn',
    'tamper',
    'assign',
    'impose',
    'refer',
    'wish',
    'draw',
    'recruit',
    'estimate',
    'vie',
    'represent',
    'accuse',
    'dismiss',
    'occupy',
    'vacate',
    'sow',
    'play',
    'attribute',
    'veil',
    'apply',
    'disagree',
    'emulate',
    'tell',
    'signal',
    'bear',
    'engage',
    'gain',
    'subject',
    'strike',
    'win',
    'order',
    'inoculate',
    'listen',
    'ask',
    'enquire',
    'age',
    'connect',
    'search',
    'think',
    'coincide',
    'seem',
    'reinforce',
    'note',
    'happen',
    'channel',
    'risk',
    'praise',
    'mix',
    'declare',
    'wave',
    'enlist',
    'set',
    'announce',
    'award',
    'double',
    'pin',
    'help',
    'visit',
    'push',
    'influence',
    'urge',
    'speak',
    'manage',
    'deprive',
    'decommission',
    'embody',
    'shock',
    'hand',
    'attend',
    'contravene',
    'choose',
    'uphold',
    'die',
    'lay',
    'spill',
    'carve',
    'approve',
    'resent',
    'construct',
    'comprise',
    'flaunt',
    'festoon',
    'treat',
    'consist',
    'liken',
    'institute',
    'aim',
    'mean',
    'bar',
    'seek',
    'secularize',
    'use',
    'abhor',
    'propel',
    'suppose',
    'resist',
    'sever',
    'discuss',
    'back',
    'safeguard',
    'further',
    'grant',
    'cut',
    'disavow',
    'write',
    'blame',
    'cross',
    'fire',
    'retain',
    'revise',
    'try',
    'want',
    'sound',
    'land',
    'frighten',
    'polarise',
    'reject',
    'mount',
    'respond',
    'introduce',
    'confront',
    'agitate',
    'purge',
    'heed',
    'struggle',
    'wage',
    'battle',
    'sign',
    'involve',
    'embark',
    'cement',
    'lobby',
    'dispatch',
    'appeal',
    'compete',
    'acquiesce',
    'boost',
    'enter',
    'dominate',
    'meet',
    'chair',
    'hope',
    'pledge',
    'proceed',
    'review',
    'launch',
    'overturn',
    'spark',
    'prescribe',
    'rank',
    'seal',
    'border',
    'share',
    'settle',
    'exist',
    'commend',
    'get',
    'like',
    'question',
    'file',
    'accompany',
    'step',
    'echo',
    'gather',
    'replace',
    'intermingle',
    'forbid',
    'lie',
    'provide',
    'understand',
    'swear',
    'display',
    'denounce',
    'demand',
    'rally',
    'afford',
    'enjoy',
    'advocate',
    'applaud',
    'reelect',
    'boast',
    'revive',
    'defend',
    'address',
    'fund',
    'plead',
    'invite',
    'handle',
    'barricade',
    'kowtow',
    'claim',
    'identify',
    'post',
    'free',
    'promote',
    'convert',
    'undermine',
    'enforce',
    'discriminate',
    'repress',
    'disappear',
    'administer',
    'prohibit',
    'rebrand',
    'issue',
    'list',
    'move',
    'sing',
    'teach',
    'endure',
    'conceive',
    'end',
    'ease',
    'inform',
    'offer',
    'raise',
    'plan',
    'evolve',
    'target',
    'constitute',
    'head',
    'protest',
    'weaken',
    'amend',
    'detain',
    'cooperate',
    'link',
    'dismantle',
    'guarantee',
    'forget',
    'convict',
    'sentence',
    'return',
    'dabble',
    'hike',
    'base',
    'explore',
    'catch',
    'name',
    'deal',
    'renegotiate',
    'batter',
    'complicate',
    'decline',
    'buffet',
    'unwind',
    'exemplify',
    'asphyxiate',
    'secure',
    'achieve',
    'upgrade',
    'diversify',
    'sprout',
    'form',
    'enslave',
    'coerce',
    'meddle',
    'stem',
    'bleed',
    'support',
    'lose',
    'occur',
    'ensure',
    'benefit',
    'prefer',
    'top',
    'prioritize',
    'travel',
    'reflect',
    'analyze',
    'enhance',
    'outstrip',
    'hinge',
    'subjugate',
    're-establish',
    'acquire',
    'consume',
    'threaten',
    'rediscover',
    'explain',
    'preside',
    'paint',
    'root',
    'arise',
    'tap',
    'orchestrate',
    'infuse',
    'destabilise',
    'eat',
    'reside',
    'vote',
    'flood',
    'examine',
    'owe',
    'near',
    'mire',
    'tip',
    'thwart',
    'point',
    'position',
    'speed',
    'buy',
    'pour',
    'commission',
    'star',
    'belong',
    'highlight',
    'develop',
    'demonstrate',
    'pave',
    'simplify',
    'found',
    'strengthen',
    'forge',
    'debilitate',
    'knock',
    'hamper',
    'regain',
    'condemn',
    'abolish',
    'pend',
    'violate',
    'stir',
    'justify',
    'ban',
    'broach',
    'disseminate',
    'register',
    'place' ]

const sleep = (milliseconds) => {
    return new Promise(resolve => setTimeout(resolve, milliseconds))
}

//usage:
// verbDbController.getVerbDb((result) => {
//     recursiveDoStuff(0, verbList.length, result)
// })
function recursiveDoStuff(index, totalCount, verbDb) {
    sleep(1500).then(() => {
        if (index >= totalCount) {
            console.log("Finish adding verb!")
        } else {
            verbProcessor.getVerbResult(verbList[index], (result) => {
                if (utils.isNullOrUndefined(result)) {
                    console.log("Can't find result for: " + verbList[index])
                    index ++
                    recursiveDoStuff(index, totalCount, verbDb)
                } else {
                    verbDb.push(result)
                    verbDbController.writeToDb(verbDb, (res) => {
                        console.log("Succesfully add to DB: " + result.verb)
                        index ++
                        recursiveDoStuff(index, totalCount, verbDb)
                    })
                }
            })
        }
    })
}

